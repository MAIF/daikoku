<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-usages/producerusage/apis" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Managing APIs | Daikoku</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://maif.github.io/daikoku/img/daikoku-mini.jpg"><meta data-rh="true" name="twitter:image" content="https://maif.github.io/daikoku/img/daikoku-mini.jpg"><meta data-rh="true" property="og:url" content="https://maif.github.io/daikoku/docs/usages/producerusage/apis"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Managing APIs | Daikoku"><meta data-rh="true" name="description" content="Create a new API"><meta data-rh="true" property="og:description" content="Create a new API"><link data-rh="true" rel="icon" href="/daikoku/img/daikoku-mini.svg"><link data-rh="true" rel="canonical" href="https://maif.github.io/daikoku/docs/usages/producerusage/apis"><link data-rh="true" rel="alternate" href="https://maif.github.io/daikoku/docs/usages/producerusage/apis" hreflang="en"><link data-rh="true" rel="alternate" href="https://maif.github.io/daikoku/docs/usages/producerusage/apis" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Usages","item":"https://maif.github.io/daikoku/docs/usages/"},{"@type":"ListItem","position":2,"name":"Using Daikoku as an API producer","item":"https://maif.github.io/daikoku/docs/usages/producerusage/"},{"@type":"ListItem","position":3,"name":"Managing APIs","item":"https://maif.github.io/daikoku/docs/usages/producerusage/apis"}]}</script><link rel="stylesheet" href="/daikoku/assets/css/styles.ec4c36b5.css">
<script src="/daikoku/assets/js/runtime~main.a72bed03.js" defer="defer"></script>
<script src="/daikoku/assets/js/main.5aeb3466.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/daikoku/img/daikoku-mini-dark.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/daikoku/"><div class="navbar__logo"><img src="/daikoku/img/daikoku-mini-dark.svg" alt="Daikoku logo" class="header-logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/daikoku/img/daikoku-mini-dark.svg" alt="Daikoku logo" class="header-logo themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Daikoku</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/daikoku/docs/getstarted/">Documentation</a><a class="navbar__item navbar__link" href="/daikoku/openapi">OpenAPI</a><a class="navbar__item navbar__link" href="/daikoku/docs/cli">CLI</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/maif/daikoku" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/daikoku/docs/getstarted/"><span title="Get started" class="categoryLinkLabel_W154">Get started</span></a><button aria-label="Expand sidebar category &#x27;Get started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/daikoku/docs/usages/"><span title="Usages" class="categoryLinkLabel_W154">Usages</span></a><button aria-label="Collapse sidebar category &#x27;Usages&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/daikoku/docs/usages/adminusage/"><span title="Using Daikoku as Daikoku admin" class="categoryLinkLabel_W154">Using Daikoku as Daikoku admin</span></a><button aria-label="Expand sidebar category &#x27;Using Daikoku as Daikoku admin&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/daikoku/docs/usages/tenantusage/"><span title="Using Daikoku as Tenant admin" class="categoryLinkLabel_W154">Using Daikoku as Tenant admin</span></a><button aria-label="Expand sidebar category &#x27;Using Daikoku as Tenant admin&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/daikoku/docs/usages/producerusage/"><span title="Using Daikoku as an API producer" class="categoryLinkLabel_W154">Using Daikoku as an API producer</span></a><button aria-label="Collapse sidebar category &#x27;Using Daikoku as an API producer&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/daikoku/docs/usages/producerusage/apis"><span title="Managing APIs" class="linkLabel_WmDU">Managing APIs</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/daikoku/docs/usages/producerusage/members"><span title="Managing teams" class="linkLabel_WmDU">Managing teams</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/daikoku/docs/usages/producerusage/subscriptions"><span title="Managing API subscription" class="linkLabel_WmDU">Managing API subscription</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/daikoku/docs/usages/producerusage/assets"><span title="Managing team assets" class="linkLabel_WmDU">Managing team assets</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/daikoku/docs/usages/producerusage/income"><span title="Team earnings" class="linkLabel_WmDU">Team earnings</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/daikoku/docs/usages/producerusage/1.5-apigroups"><span title="Managing API groups" class="linkLabel_WmDU">Managing API groups</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/daikoku/docs/usages/consumerusage/"><span title="Using Daikoku as an API consumer" class="categoryLinkLabel_W154">Using Daikoku as an API consumer</span></a><button aria-label="Expand sidebar category &#x27;Using Daikoku as an API consumer&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/daikoku/docs/guides/"><span title="Guides" class="categoryLinkLabel_W154">Guides</span></a><button aria-label="Expand sidebar category &#x27;Guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/daikoku/docs/cli/"><span title="CLI" class="categoryLinkLabel_W154">CLI</span></a><button aria-label="Expand sidebar category &#x27;CLI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/daikoku/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/daikoku/docs/usages/"><span>Usages</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/daikoku/docs/usages/producerusage/"><span>Using Daikoku as an API producer</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Managing APIs</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Managing APIs</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="create-a-new-api">Create a new API<a href="#create-a-new-api" class="hash-link" aria-label="Direct link to Create a new API" title="Direct link to Create a new API" translate="no">​</a></h2>
<p>To create a new API, you can click on the <code>+ Create an API</code> button in the dahboard page.
After clicking, you need to choose a team which is the owner.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="api-information">API information<a href="#api-information" class="hash-link" aria-label="Direct link to API information" title="Direct link to API information" translate="no">​</a></h3>
<p>An API needs a name to be created.
Then, you can add a small description, which will be displayed on the corresponding catalog&#x27;s page.
The API can be published or not. In the latter case, you can consider this as a draft.
An image can be provided for the &quot;card view&quot; of the API list page.
To go further in the customization of Daikoku, the header of frontend page of all APIs can be customized by HTML</p>
<blockquote>
<p>To keep the title and the description, use the title and description surrended by a double brace in your template. You can add a button with the <code>btn-edit</code> classname to add a direct link to the API backoffice for your team members.</p>
</blockquote>
<p>You can also setup metadata, usable on subscription customization by using expression language like <code>${api.metadata.&lt;key&gt;}</code></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="versions-and-tags">Versions and tags<a href="#versions-and-tags" class="hash-link" aria-label="Direct link to Versions and tags" title="Direct link to Versions and tags" translate="no">​</a></h3>
<p>Versioning your API is supported. You can update the current version of your API.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Make sure that your main version is toggle as <code>use as last version</code> to be sure the link in the API list redirects to the correct version of your API.</p></div></div>
<p>Supported versions are pure information for your users.
Tags and categories are arrays of items, mostly used to filter APIs.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="visibility">Visibility<a href="#visibility" class="hash-link" aria-label="Direct link to Visibility" title="Direct link to Visibility" translate="no">​</a></h3>
<p>Visibility can be:</p>
<ul>
<li class="">public: everybody can see the complete API.</li>
<li class="">public with authorization: everybody sees just a part of the API, on the catalog&#x27;s page (name, tags, categories and small desc.). Everybody can ask for access to an admin of owner team.</li>
<li class="">private: Only authorized teams have access to the API.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="authorizations">Authorizations<a href="#authorizations" class="hash-link" aria-label="Direct link to Authorizations" title="Direct link to Authorizations" translate="no">​</a></h3>
<p>The teams that have access to the API, in the case of visibility are private.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="description">Description<a href="#description" class="hash-link" aria-label="Direct link to Description" title="Direct link to Description" translate="no">​</a></h3>
<p>API description. Basically, it can be written in MarkDown, but you can also use HTML.
The description can be set as a team asset.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="openapi-definition">OpenAPI definition<a href="#openapi-definition" class="hash-link" aria-label="Direct link to OpenAPI definition" title="Direct link to OpenAPI definition" translate="no">​</a></h3>
<p>The OpenAPI definition can be provided as an URL or just some content pasted on the UI.
An additional configuration allow to</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="testing">Testing<a href="#testing" class="hash-link" aria-label="Direct link to Testing" title="Direct link to Testing" translate="no">​</a></h3>
<p>You can enable the testing for your API.</p>
<blockquote>
<p>API testing is powered by the OpenAPI definition you provide.</p>
</blockquote>
<p>Before anything else, you must provide a Test server URL.
This URL will be used as the base endpoint for all API calls made through the Swagger UI. Without it, testing cannot be activated.</p>
<p>There are two ways to authenticate your test calls:</p>
<p>Using otoroshi:
Generate a dedicated testing API key in Otoroshi by clicking the <code>Generate a dedicated testing key in Otoroshi</code> button. You will be prompted to select an Otoroshi instance and the route (or service group) associated with your test environment.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>If you&#x27;re using this method, ensure that the &quot;apikey mandatory tags&quot; module is enabled on the selected route in Otoroshi, and that the expected tag (displayed in the configuration modal) is correctly set.</p></div></div>
<p>Using Basic Auth or simple apikey:
Alternatively, you can provide a username and password that will be used in each test request.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="configure-your-openapi">Configure your openAPI<a href="#configure-your-openapi" class="hash-link" aria-label="Direct link to Configure your openAPI" title="Direct link to Configure your openAPI" translate="no">​</a></h4>
<p>Your openAPI has to be configured to accept apikey from Basic authentication header or from the <code>Otoroshi-Client-Id</code> and <code>Otoroshi-Client-Secret</code> headers.</p>
<p>If you have changed the Otoroshi headers to pass the apikey don&#x27;t forget to apply the changes on your openAPI.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">paths</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /api/_verify</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    get</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      summary</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Verification using query params</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      operationId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> getVerify</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      security</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - basicAuth</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - otoClientId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        otoClientSecret</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">components</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  schemas</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  securitySchemes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    basicAuth</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      scheme</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> basic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    otoClientId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> apiKey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Otoroshi-Client-Id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      in</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    otoClientSecret</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> apiKey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Otoroshi-Client-Secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      in</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> header</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Make sure this service descriptor is the right one for testing and not your production system !</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="documentation">Documentation<a href="#documentation" class="hash-link" aria-label="Direct link to Documentation" title="Direct link to Documentation" translate="no">​</a></h3>
<p>The documentation tabs allow you to create paginated documentation. Like description, every page can be written with MarkDown or set from an asset.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="manage-subscription">Manage subscription<a href="#manage-subscription" class="hash-link" aria-label="Direct link to Manage subscription" title="Direct link to Manage subscription" translate="no">​</a></h2>
<p>On the team APIs screen in your team back office, it&#x27;s possible to manage every APIs its subscriptions by clicking on the <code>key</code> button.
You can activate/deactivate API keys or update metadata.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="api-consumptions">API consumptions<a href="#api-consumptions" class="hash-link" aria-label="Direct link to API consumptions" title="Direct link to API consumptions" translate="no">​</a></h2>
<p>On the team APIs screen in your team&#x27;s back office, it&#x27;s possible to see every APIs consumptions by clicking on the <code>stats</code> button. Global stats by default but visible by API key or usage plan.</p>
<h1>Managing Plans</h1>
<p>An API needs a plan to be subscribed.
Plan needs a name, possibly a description and an <a class="" href="/daikoku/docs/usages/tenantusage/otoroshi">Otoroshi instance</a>.</p>
<p>You can define a plan as the <strong>default plan</strong>, as it&#x27;s possible to <strong>make it private</strong> (only accessible by the producer team).
It&#x27;s possible to <strong>allow multiple API keys</strong> for a plan (by default, a team can only have one API key).
It&#x27;s possible to <strong>allow API keys aggregation</strong></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Since version <code>18.7.1</code> plans no longer have predefined types.</p></div></div>
<p>Plans in Daikoku are fully configurable.
Each plan can define <strong>quotas</strong> (e.g., number of allowed requests per windows/sec, day or month) and <strong>pricing</strong> settings (e.g., fixed monthly costs, per-request pricing).</p>
<p>By combining these options, you can create plans tailored to different use cases, whether free, quota-based, or pay-per-use, without being constrained by predefined categories.</p>
<p>The subscription process in Daikoku offers flexibility, allowing users to customize their validation steps. There are few possible types of steps:</p>
<ul>
<li class=""><strong>Form</strong>: A step to display a customizable form, to ask specific information to the user.</li>
</ul>
<blockquote>
<p>It&#x27;s possible to configure this step to display a specific form when the user asks for a subscription.
To parameterize the form, we use the JSON language used by <a href="https://github.com/MAIF/react-forms#maifreact-forms" target="_blank" rel="noopener noreferrer" class="">@maif/react-forms</a>.
You can write a formatter to format the form response as a notification sent to admins. It&#x27;s just a string with a replacement pattern like this <code>[[label]]</code>
the result of the form is used to automatically generate metadata, configure with the <code>keysToMetadata</code> parameter which will be deletable or modifiable before validation by the admin (if ana admin step is configure)
A header can be setup to display a quick description to the user</p>
</blockquote>
<ul>
<li class="">
<p><strong>Admin Validation</strong>: This step requires an administrator from the API&#x27;s owning team to validate the subscription request. When a request is submitted, all administrators in the team receive a Daikoku notification and an email containing the request details. The first administrator who validates the notification approves the step.</p>
</li>
<li class="">
<p><strong>HTTP Request</strong>: This step is a semi-automatic step. A HTTP POST is sent to an API with the whole context of the subscription demand.
A JSON response is awaited with a precise format.</p>
</li>
</ul>
<blockquote>
<p>A property <code>accept</code> as boolean to accept or reject the subscription demand
it totally possible to calculate and give some metadata or custom property for the subscription to created</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;accept&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//mendatory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;customMaxPerDay&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//set quotas value for max request per day for API key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;customMaxPerSecond&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//set Quotas value for max request per second for API key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;customMaxPerMonth&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//set Quotas value for max request per Month for API key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;customMetadata&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//set metadata (merge with automatic metadata) for API key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;value1&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;value2&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;value3&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;foo&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;adminCustomName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;foo-bar-apikey&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//admin custom name is a subscription name only visible by api producer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;customReadOnly&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//set readonly property for APIkey</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;customName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bar-foo-apikey&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//custom name is the subscription name visible by consumer (it can be overwritten by him)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;tags&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;tag 1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;tag 2&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//merge tags with automatic tags and set tags of API key. be aware of tags are displayed for consumer in UI</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>The body of the call contains a lot of data in the context: the subscription demand with the other step information, the API, the usage plan, the team and the aggregation in case of an aggregated apikey</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;demand&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;api&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;plan&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;team&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;aggregate&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;parent&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;api&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;plan&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;subscription&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;subscriptions&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;api&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;plan&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;subscription&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
</blockquote>
<ul>
<li class="">
<p><strong>Email Validation</strong>: This step involves a third-party person validating the subscription request by clicking on a validation link sent to the provided email address. Once the person clicks on the link, the request is validated, and the user is redirected to a public acknowledgment interface.</p>
</li>
<li class="">
<p><strong>Payment Validation</strong>: This step requires the requester to make a payment through a payment gateway. The user is redirected to a payment page provided by the payment gateway where they need to enter their payment information. Once the payment is validated, the subscription is approved, and the user is redirected to Daikoku&#x27;s home page.</p>
</li>
</ul>
<blockquote>
<p>When a consumption plan for an API is priced, after its creation, one or more Stripe products are created based on the plan type:</p>
<p><strong>Quotas Only</strong>: A fixed-price subscription product is created.</p>
<p><strong>Quotas / Pay Per Use</strong>: Two products are created: a fixed-price subscription and a variable component linked to the user&#x27;s consumption, which is synchronized with Stripe at the end of each day.</p>
<p><strong>Pay Per Use</strong>: Similarly, two products are created: a fixed-price subscription and a variable component linked to the user&#x27;s consumption.</p>
</blockquote>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Please note that the email validation step can be used multiple times, while the other steps can only be completed once in the process.</p></div></div>
<p>The subscription process can be customized by adding new steps based on specific requirements.</p>
<blockquote>
<p>Daikoku is an open-source project, and we encourage community initiatives to contribute new step types. We invite contributors to submit Pull Requests on the <a href="https://github.com/MAIF/daikoku" target="_blank" rel="noopener noreferrer" class="">project&#x27;s GitHub repository</a> to propose new features.</p>
</blockquote>
<p>To visualize and customize the subscription process, you can access the &quot;Process&quot; tab from the plan modification page. From this tab, you can view the entire process, add new steps, modify existing ones, or delete steps.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Please be aware that modifying or deleting a step immediately affects ongoing requests, either modifying them or validating them if necessary.</p></div></div>
<p>When submitting a subscription request, the only required data is the team for which you want to subscribe. The subscription process may also prompt you to provide a motivation, particularly if the admin validation step is included. In such cases, a modal window appears to allow for detailed motivation for the request.</p>
<p>Once the subscription request is validated or declined, notifications and emails are generated to inform the user of the request&#x27;s status.</p>
<p>If your subscription plan is associated with consumption-based pricing, you can also modify certain billing information, such as your name, address, and payment details. The link to the billing information modification page, stored by the payment gateway, can be found on Daikoku&#x27;s billing page.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="otoroshi-billing-and-security">Otoroshi, billing and security<a href="#otoroshi-billing-and-security" class="hash-link" aria-label="Direct link to Otoroshi, billing and security" title="Direct link to Otoroshi, billing and security" translate="no">​</a></h4>
<p>Depending on the chosen plan type, certain custom properties may be accessible.</p>
<ul>
<li class="">Plan needs an Otoroshi instance to allow users to subscribe. After choosing an instance, a list of Otoroshi service groups and services is accessible to link Daikoku API/plan with one or more Otoroshi service groups or services.</li>
<li class="">As it&#x27;s Otoroshi which manages APIs, apikey quotas can be defined.</li>
<li class="">Daikoku provides, like <a href="https://maif.github.io/otoroshi/manual/entities/apikeys.html" target="_blank" rel="noopener noreferrer" class="">Otoroshi</a>, some apikey parameters.</li>
<li class="">Daikoku side, billing informations can be filled (billing period, cost per month, currency ...)</li>
<li class="">For security, you can force apikey rotation. It&#x27;s an Otoroshi feature that will reset clientSecret every month with a grace period of 1 week (during this week both secrets work)</li>
<li class="">You can force the integration process:<!-- -->
<ul>
<li class="">ApiKey: subscribers have access to an apikey to call API</li>
<li class="">Automatic: Subscribers have just access to a token, which links to a real apikey, accessible by admin API. It&#x27;s a perfect solution to integrate automatically your apikey in your prod environment if rotation is activated.</li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>As Otoroshi does, it&#x27;s possible to add metadata to API keys. <strong>Automatic metadata</strong> will be calculated and added after subscription validation. <strong>Asked metadata</strong> will switch the plan subscription mode to manual then, on subscription acceptation, a team admin will have to add the metadata manually.</p><p>Metadata can use an expression language to retrieve dynamic values ​​from related entities, such as <code>api</code>, <code>usage plan</code>, <code>team</code>, and <code>user</code>.</p><blockquote>
<p>Example: To retrieve a value about the subscribing team, such as its name, you can write the following expression: <code>${team.name}</code></p>
</blockquote></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/daikoku/docs/usages/producerusage/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Using Daikoku as an API producer</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/daikoku/docs/usages/producerusage/members"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Managing teams</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#create-a-new-api" class="table-of-contents__link toc-highlight">Create a new API</a><ul><li><a href="#api-information" class="table-of-contents__link toc-highlight">API information</a></li><li><a href="#versions-and-tags" class="table-of-contents__link toc-highlight">Versions and tags</a></li><li><a href="#visibility" class="table-of-contents__link toc-highlight">Visibility</a></li><li><a href="#authorizations" class="table-of-contents__link toc-highlight">Authorizations</a></li><li><a href="#description" class="table-of-contents__link toc-highlight">Description</a></li><li><a href="#openapi-definition" class="table-of-contents__link toc-highlight">OpenAPI definition</a></li><li><a href="#testing" class="table-of-contents__link toc-highlight">Testing</a></li><li><a href="#documentation" class="table-of-contents__link toc-highlight">Documentation</a></li></ul></li><li><a href="#manage-subscription" class="table-of-contents__link toc-highlight">Manage subscription</a></li><li><a href="#api-consumptions" class="table-of-contents__link toc-highlight">API consumptions</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">MAIF</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://maif.github.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">OSS by MAIF</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/vUP2eKYu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/MAIF/daikoku" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/MAIF/daikoku/releases/latest" target="_blank" rel="noopener noreferrer" class="footer__link-item">Download<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div></div></footer></div>
</body>
</html>